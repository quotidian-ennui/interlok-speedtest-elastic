ext {
  interlokParentGradle = "https://raw.githubusercontent.com/adaptris/interlok-build-parent/master/v4/build.gradle"
  interlokVersion = '4.2-SNAPSHOT'
  graalvmVersion="21.1.0"
}

allprojects {
  apply from: "${interlokParentGradle}"
}

configurations.all {
  resolutionStrategy.cacheChangingModulesFor 0, "seconds"
}

dependencies {
  def interlokDeps = [ "core", "boot", "logging", "common", "core-apt",
                "varsub", "csv", "json", "elastic-rest", "apache-http",
                "expressions", "rest-health-check", "profiler"
                ] as String[]

  interlokDeps.each {
    add("interlokRuntime",  [group: "com.adaptris", name: "interlok-${it}", version: interlokVersion, changing: true])
    // add("interlokJavadocs", [group: "com.adaptris", name: "interlok-${it}", version: interlokVersion, changing: true, classifier: "javadoc", transitive: false])
  }

  interlokRuntime("co.elastic.logging:log4j2-ecs-layout:0.5.0")
  interlokRuntime ("org.graalvm.sdk:graal-sdk:$graalvmVersion")
  interlokRuntime ("org.graalvm.js:js:$graalvmVersion")
  interlokRuntime ("org.graalvm.js:js-scriptengine:$graalvmVersion")
}

